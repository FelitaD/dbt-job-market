version: 2

models:
  - name: stg_urls
    description: one unique url per row
    columns:
      - name: id
        description: the primary key for stg_urls
        tests:
          - unique
          - not_null
      - name: cleaned_url
        description: url without the part used when website (ie. welcometothejungle.com) reposts the same job posting
        tests:
          - unique
          - not_null
  - name: stg_titles
    description: title of the job posting without unnecessary information
    columns:
      - name: id
        description: the primary key for stg_titles
        tests:
          - unique
          - not_null
      - name: title
        description: the original, raw title
        tests:
          - not_null
      - name: minus_parenthesis
        description: title without any parenthesis (and what's inside)
        tests:
          - not_null
      - name: minus_gender
        description: title without gender that wasn't inside parenthesis
        tests:
          - not_null
  - name: stg_contract_types
    description: contract type of job posting
    columns:
      - name: id
        description: the primary key for stg_contract_types
        tests:
          - unique
          - not_null
      - name: contract
        description: the original, raw contract type
      - name: simplified_contract
        description: contract type translated from french to english
        tests:
          - accepted_values:
              values: ['Full Time', 'Graduate program', 'Other', 'Freelance']
  - name: stg_remote_policies
    description: remote policy of job posting
    columns:
      - name: id
        description: the primary key for stg_remote_policies
        tests:
          - unique
          - not_null
      - name: remote
        description: the original, raw remote policy
      - name: simplified_remote
        description: remote policy simplified to one word
        tests:
          - accepted_values:
              values: ['total', 'partial', 'ponctual']
  - name: stg_texts
    description: text description of job posting
    columns:
      - name: id
        description: the primary key for stg_texts
        tests:
          - unique
          - not_null
      - name: text
        description: the original, raw text description
      - name: cleaned_text
        description: the text with multiple newlines replaced with unique newline
        tests:
          - not_null
  - name: job_postings
    description: final preprocessed job posting
    columns:
      - name: id
        description: the primary key for job_postings
        tests:
          - unique
          - not_null
      - name: url
        description: url of job posting
        tests:
          - unique
          - not_null
      - name: title
        description: title of the job
        tests:
          - not_null
      - name: company
        description: company of the job
        tests:
          - not_null
      - name: location
        description: location of the job
      - name: contract
        description: contract type of the job
      - name: industry
        description: industry or sector of the company
      - name: remote
        description: remote policy of the job
      - name: text
        description: text description of the job
        tests:
          - unique
          - not_null
